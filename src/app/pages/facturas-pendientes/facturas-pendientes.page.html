<ion-header>
  <!-- <ion-toolbar color="secondary">
    <ion-title>Academy Accordion</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="automaticClose = !automaticClose">
        <ion-icon
          slot="icon-only"
          name="close"
          *ngIf="automaticClose"
        ></ion-icon>
        <ion-icon
          slot="icon-only"
          name="resize"
          *ngIf="!automaticClose"
        ></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar> -->
  <ion-toolbar color="secondary">
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title class="ion-text-center margin-right">Facturas Pendientes</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-grid fixed>
    <ion-row>
      <ion-col size="12">
        <ion-searchbar
          animated
          placeholder="Buscar factura..."
          cancelButtonText="Custom Cancel"
          (ionChange)="buscar( $event )"
        ></ion-searchbar>
      </ion-col>
    </ion-row>

    <ion-list
      *ngFor="let item of facturas | filtro: searchFactura; let i = index"
      class="accordion-list ion-no-padding"
      lines="none"
      detail="false"
    >
      <ion-item
        tappable
        (click)="toggleSection(i)"
        [ngClass]="{'section-active': item.open, 'section': !item.open}"
      >
        <ion-icon
          slot="start"
          name="arrow-forward"
          *ngIf="!item.open"
        ></ion-icon>
        <ion-icon slot="start" name="arrow-down" *ngIf="item.open"></ion-icon>
        <ion-label>
          {{ item.nombre }}
        </ion-label>
      </ion-item>

      <div *ngIf="item.open">
        <!-- <h1>{{ item. numeroOrden }}</h1>
        <h2>{{ item. numeroOrden }}</h2>
        <h3>{{ item.idOrden }}</h3>
        <ion-button
          expand="full"
          (click)="aceptar(item)"
          color="success"
          class="ion-no-margin"
        >
          <ion-icon slot="icon-only" name="checkmark"></ion-icon>
        </ion-button> -->
        <ion-card>
          <ion-row>
            <ion-col size="6" class="ion-text-center">
              <p>Fecha creaci√≥n</p>
              <ion-item class="ion-text-center">
                <ion-label>{{item.fechaCreacion}}</ion-label>
                <ion-icon
                  color="medium"
                  class="icon-simple"
                  slot="start"
                  name="calendar"
                ></ion-icon>
              </ion-item>
            </ion-col>
            <ion-col size="6" class="ion-text-center">
              <p>Fecha subida</p>
              <ion-item class="ion-text-center">
                <ion-label>{{item.fechaSubida}}</ion-label>
                <ion-icon
                  color="success"
                  class="icon-simple"
                  slot="start"
                  name="checkmark-circle-outline"
                ></ion-icon>
              </ion-item>
            </ion-col>
          </ion-row>

          <ion-row>
            <ion-col size="6" class="ion-text-center">
              <p>ID la factura</p>
              <ion-item class="ion-text-center">
                <ion-label>{{item.idFactura}}</ion-label>
                <ion-icon
                  color="dark tint"
                  class="icon-facts"
                  slot="start"
                  name="clipboard"
                ></ion-icon>
              </ion-item>
            </ion-col>
            <ion-col size="6" class="ion-text-center">
              <p>ID de la orden</p>
              <ion-item class="ion-text-center">
                <ion-label>{{item.idOrden}}</ion-label>
                <ion-icon
                  color="danger shade"
                  class="icon-facts"
                  slot="start"
                  name="document"
                ></ion-icon>
              </ion-item>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col size="6">
              <ion-button
                expand="full"
                (click)="aceptar(item)"
                color="success"
                class="ion-no-margin"
              >
                <ion-icon slot="icon-only" name="checkmark"></ion-icon>
              </ion-button>
            </ion-col>
            <ion-col size="6">
              <ion-button
                expand="full"
                (click)="rechazar()"
                color="danger"
                class="ion-no-margin"
              >
                <ion-icon slot="icon-only" name="close"></ion-icon>
              </ion-button>
            </ion-col>
          </ion-row>
        </ion-card>
      </div>

      <!-- <p *ngIf="item.children.length === 0 && item.open">
      Sorry, nothing
    </p> -->
    </ion-list>

    <!-- <app-expandable></app-expandable> -->

    <!-- <ion-grid fixed>
    <ion-row>
      <ion-col size="12">
        <ion-searchbar
          cancelButtonText="Custom Cancel"
          (ionChange)="buscar( $event )"
        ></ion-searchbar>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col size="12">
        <ion-card *ngFor="let factura of facturas | filtro: searchFactura">
          <ion-row>
            <ion-col size="12" class="ion-no-padding">
              <ion-item color="tertiary" lines="none">
  
                <ion-label>
                  {{ factura.fechaCreacion }}
                </ion-label>
                <ion-icon
                  class="icon-left"
                  name="calendar"
                  slot="start"
                ></ion-icon>

                <ion-label class="label-right">
                  {{ factura.numeroOrden }}
                </ion-label>
                <i class="icon-right fas fa-ticket-alt fa-1x"></i>
              </ion-item>
            </ion-col>
          </ion-row>

          <ion-row>
            <ion-col size="12" class="ion-text-center">
              <h2 class="ion-text-wrap ion-text-capitalize">
                {{ factura.nombre }}
              </h2>
            </ion-col>
          </ion-row>

          <ion-card-content class="ion-no-padding">
            <ion-row>
              <ion-col size="6" class="ion-no-padding">
                <ion-label>
                  <h2 class="state-right">Estado de la factura</h2>
                </ion-label>
              </ion-col>

              <ion-col
                size="6"
                class="ion-no-padding ion-justify-content-center ion-align-items-center"
              >
                <ion-badge class="badge-center" color="success"
                  >Factura validada por el SAT</ion-badge
                >
              </ion-col>
            </ion-row>

            <ion-row class="ion-text-center">
              <ion-col size="12" class="ion-no-padding ion-margin-top">
                <ion-label>
                  <h2 class="archived">Archivos</h2>
                </ion-label>
              </ion-col>
              <ion-col
                size="12"
                class="ion-no-padding ion-margin-top"
                (click)="openLocalPdf()"
              >
                <i class="fas fa-file-pdf fa-2x"></i>
              </ion-col>
            </ion-row>

            <ion-row class="ion-text-center">
              <ion-col size="12" class="ion-no-padding ion-margin-top">
                <ion-label>
                  <h2 class="actions">Acciones</h2>
                </ion-label>
              </ion-col>

              <ion-col size="6" class="ion-no-padding ion-margin-top">
                <ion-button
                  expand="full"
                  (click)="aceptar(factura)"
                  color="success"
                  class="ion-no-margin"
                >
                  <ion-icon slot="icon-only" name="checkmark"></ion-icon>
                </ion-button>
              </ion-col>

              <ion-col size="6" class="ion-no-padding ion-margin-top">
                <ion-button
                  expand="full"
                  (click)="rechazar(factura)"
                  color="danger"
                  class="ion-no-margin"
                >
                  <ion-icon slot="icon-only" name="close"></ion-icon>
                </ion-button>
              </ion-col>
            </ion-row>
          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>

  <ion-grid *ngIf="!facturas">
    <ion-col size="12" class="ion-text-center">
      <img src="/assets/no-data.png" alt="" />
      <h4>No hay facturas por el momento</h4>
    </ion-col>
  </ion-grid> -->
  </ion-grid>
</ion-content>
